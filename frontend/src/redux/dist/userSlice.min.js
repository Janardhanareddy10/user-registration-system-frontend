"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.deleteUser=exports.updateUser=exports.createUser=exports.fetchUserById=exports.fetchUsers=void 0;var _toolkit=require("@reduxjs/toolkit"),_axios=_interopRequireDefault(require("axios"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var API_URL="http://localhost:5000/api/users",fetchUsers=(0,_toolkit.createAsyncThunk)("users/fetchUsers",function(){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(_axios.default.get(API_URL));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}})});exports.fetchUsers=fetchUsers;var fetchUserById=(0,_toolkit.createAsyncThunk)("users/fetchUserById",function(r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(_axios.default.get("".concat(API_URL,"/").concat(r)));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}})});exports.fetchUserById=fetchUserById;var createUser=(0,_toolkit.createAsyncThunk)("users/createUser",function(r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(_axios.default.post(API_URL,r));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}})});exports.createUser=createUser;var updateUser=(0,_toolkit.createAsyncThunk)("users/updateUser",function(r){var t,s,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.id,s=r.userData,e.prev=1,console.log("Sending update request:",{id:t,userData:s}),e.next=5,regeneratorRuntime.awrap(_axios.default.put("".concat(API_URL,"/").concat(t),s));case 5:return a=e.sent,console.log("Update response:",a.data),e.abrupt("return",a.data);case 10:throw e.prev=10,e.t0=e.catch(1),console.error("Error updating user:",e.t0.response?e.t0.response.data:e.t0.message),e.t0;case 14:case"end":return e.stop()}},null,null,[[1,10]])});exports.updateUser=updateUser;var deleteUser=(0,_toolkit.createAsyncThunk)("users/deleteUser",function(r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(_axios.default.delete("".concat(API_URL,"/").concat(r)));case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}})});exports.deleteUser=deleteUser;var userSlice=(0,_toolkit.createSlice)({name:"user",initialState:{users:[],user:null,loading:!1,error:null},reducers:{},extraReducers:function(e){e.addCase(fetchUsers.pending,function(e){e.loading=!0}).addCase(fetchUsers.fulfilled,function(e,r){e.loading=!1,e.users=r.payload}).addCase(fetchUsers.rejected,function(e,r){e.loading=!1,e.error=r.error.message}).addCase(fetchUserById.fulfilled,function(e,r){e.user=r.payload}).addCase(createUser.fulfilled,function(e,r){e.users.push(r.payload)}).addCase(updateUser.fulfilled,function(e,r){var t=e.users.findIndex(function(e){return e._id===r.payload._id});-1!==t&&(e.users[t]=r.payload)}).addCase(deleteUser.fulfilled,function(e,r){e.users=e.users.filter(function(e){return e._id!==r.payload})})}}),_default=userSlice.reducer;exports.default=_default;
//# sourceMappingURL=userSlice.min.js.map
